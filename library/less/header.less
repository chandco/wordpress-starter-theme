  .alpha-color(@white);
  @menu-hover : @alpha-color; 
  @menu-background : transparent;// could be a colour
  @child-background : @highlight;
  @mobile-line-height: 20px;


@header-height-px : 80px;


#container {
  @media screen and (max-width: 900px) {
    padding-top: @header-height-px * 1.1;
  }
}
.header {
  position: relative;
  z-index: 500;
  backface-visibility: hidden;
    


    

    
    width:100%;
    .header-style();

    #inner-header {
      backface-visibility: hidden;
      box-sizing: content-box;
      .max-central();
      .header-style();

      width: 100%;
      height: @header-height-px;
      padding: (@header-height-px * 0.2) 0;
      @media screen and (max-width: 900px) {
        max-width: 100%;
        position: fixed;
        top: 0;
        height: @header-height-px / 2;
        padding: (@header-height-px * 0.2) 0;

         border-bottom: 2px solid RGBA(0,0,0,0.2);
      }

      


      nav[role="navigation"] {
        width: 70%;
        right: 0;
        .vertical-center();
      }


    #logo {
      
      width: 30%;
      left: 0;
      .vertical-center();

        @media screen and (max-width: 900px) {
          left: 2%;
        }

      img {
        width: 100%;
        height: auto;
      }
    }     

    }
}


nav[role="navigation"] {

  

  .nav {  

      width: 100%;
      font-size: 0.8em;

      margin: 0;
      z-index: 10;

      text-align: right;

      li {

        display: inline-block;
        
        position: relative;

        margin-left: 0.5em;
        padding: 0.5em;
        background: @menu-background;

        &:hover {
          background: @highlight;
        }

        color: @highlight-text;

        a {
          display: block;
          color: inherit;
        }



        &:first-of-type {
          margin-left: 0;
        }

        .sub-menu, .children {

          visibility: hidden;
          position: absolute;
          background: @highlight;
          overflow: hidden;
          margin: 0;
          box-shadow: 0px 2px 0px 1px rgba(0,0,0,0.2);

          li {
            display: block;
            &:hover {
              background: @white;
            }
          }

        }
        &:hover .sub-menu, .sub-menu:hover {
          top: 100%;
          right: 0;
          overflow: visible;
          visibility: visible; 
          margin: 0;

          li {
             margin-left: 0;
             float: none;
             width: auto;
             white-space: nowrap;
          }
        }
      }
  }

        
}



#inner-header nav[role="navigation"] {
  // header navigation styles only
  position: relative;
  
}


#navigation-dropdown { 
  display: none;
}


#popup-menu-container {
  display: none;
}


@keyframes menufadein {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes bgfadein {
  from {
    background: transparent;
  }

  to {
    background: @white;
  }
}


@media screen and (max-width: 900px) {

  #navigation-dropdown {
    display: block;
    z-index: 20;
    .button-reset();
    font-size: 3em;
    right: 2%;
    width: auto;
    text-align: center;
    .vertical-center();
  }

  #inner-header nav[role="navigation"] { display: none; }


  // This is basically everything to do with when the menu is 'open'
  html { height: 100%; }
  body.navigation-menu-open  {
    // body
    height: 100%;
    box-sizing: content-box;
    padding: 0;
    margin: 0;
    


    
    #popup-menu-container {
      display: block;
      position: fixed;
      overflow: scroll;
      width: 100%;
      height: 100%;
      top : (@header-height-px / 2) + (@header-height-px * 0.4);
      background: @white;
      z-index: 500;

      animation-duration: .3s;
      animation-name: bgfadein;

      #popup-menu {
        animation-duration: 1s;
        animation-name: menufadein;

        
        > li {
          .alpha-color(@white, 0.8);
          border-bottom: 1px solid @alpha-color;
          padding: 5px;
        }

        li {
          display: block;
          float: none;
          padding: 5px;

          box-sizing: content-box;
          margin-left: 0;
          line-height: @mobile-line-height;
          min-height: @mobile-line-height;

          text-align: left;
          background: @white;



          &:nth-of-type(n+2) {
            border-top: 1px solid @highlight;
          }


          

          

          .sub-menu,.children {
            margin-top: 1em;
            box-shadow: none;
            background: none;
            visibility: visible;
            position: relative;
            display: block;
            top: 0;

            &:hover {
              top: 0;
            }


           

            > li {
                
               border-top: none;
               position: relative;
              a:before {
                content:"";
                display: inline-block;
                
                width: @mobile-line-height / 4;
                height: @mobile-line-height / 2;
                margin-right: 10px;
                border-left: 1px solid @highlight;
                border-bottom: 1px solid @highlight;
                vertical-align: top;
                background: none;
              }
            }
          }
          
          &:hover {

              background: RGBA(0,0,0,0.2);
         }
          .sub-menu {
            
          }
        }

        
      }

     }
  }
} // end @media max-width 900



.footer nav[role="navigation"] {
  // footer navigation styles only
  font-size: 0.8em;

  .nav {
    > li {
          .alpha-color(@dark, 0.8);
          
          padding: 5px;
        }

        li {
          display: block;
          float: none;
          padding: 5px;

          box-sizing: content-box;
          margin-left: 0;
          line-height: @mobile-line-height;
          min-height: @mobile-line-height;

          text-align: left;
          background: transparent;

          &:nth-of-type(n+2) {
            .darken(@dark, 0, 0.4);
            border-top: 1px solid @darker;
          }


          

          

          .sub-menu,.children {
            margin-top: 1em;
            box-shadow: none;
            background: none;
            visibility: visible;
            position: relative;
            display: block;
            top: 0;

            &:hover {
              top: 0;
            }


           

            > li {
                
               border-top: none;
               position: relative;
              a:before {
                content:"";
                display: inline-block;
                
                width: @mobile-line-height / 4;
                height: @mobile-line-height / 2;
                margin-right: 10px;
                border-left: 1px solid @alpha-color;
                border-bottom: 1px solid @alpha-color;
                vertical-align: top;
                background: none;
              }
            }
          }
          
          &:hover {

              background: RGBA(0,0,0,0.2);
         }
          .sub-menu {
            
          }
        }
      }

  
}